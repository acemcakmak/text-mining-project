after he's dumped on valentine's day by mallory , his girlfriend of three years , charlie finds himself obsessed and unable to live a normal life without her .